<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linear Equation Practice (Tables & Graphs)</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Use the Inter font family */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for correct/incorrect feedback */
        .correct-answer {
            border: 2px solid #22c55e; /* green-500 */
            background-color: #f0fdf4; /* green-50 */
        }
        .incorrect-answer {
            border: 2px solid #ef4444; /* red-500 */
            background-color: #fef2f2; /* red-50 */
        }
        .correct-text {
            color: #166534; /* green-800 */
            font-weight: 600;
        }
        .incorrect-text {
            color: #991b1b; /* red-800 */
            font-weight: 600;
        }
        /* Style for the question display */
        .function-display {
            font-family: 'Times New Roman', Times, serif;
            font-size: 1.75rem; /* 28px */
            color: #1f2937; /* gray-800 */
        }
        /* Style for the table */
        .data-table {
            width: 80%;
            max-width: 250px;
            margin: 0 auto;
            text-align: center;
            border-collapse: collapse;
            border: 2px solid #9ca3af; /* gray-400 */
        }
        .data-table th, .data-table td {
            border: 1px solid #d1d5db; /* gray-300 */
            padding: 0.75rem; /* p-3 */
            font-size: 1.25rem; /* text-xl */
        }
        .data-table th {
            background-color: #f3f4f6; /* gray-100 */
            font-weight: 700;
            font-family: 'Times New Roman', Times, serif;
            font-style: italic;
        }
        /* Style for the graph */
        .graph-container {
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
            position: relative;
            aspect-ratio: 1 / 1; /* Keep it square */
            border: 1px solid #ccc;
            background-color: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .graph-container svg {
            display: block;
            width: 100%;
            height: 100%;
        }
        .grid-line {
            stroke: #e5e7eb; /* Light gray */
            stroke-width: 1;
        }
        .axis-line {
            stroke: #4b5563; /* Darker gray */
            stroke-width: 2;
        }
        .function-line {
            stroke: #dc2626; /* Red-600 */
            stroke-width: 3;
            fill: none;
        }
        .point {
            fill: #2563eb; /* Blue-600 */
            r: 4; /* radius of points */
        }
        .axis-label {
            font-family: 'Inter', sans-serif;
            font-size: 10px;
            fill: #4b5563;
        }
        .function-label {
            font-family: 'Times New Roman', Times, serif;
            font-size: 16px;
            fill: #dc2626; /* Red-600 */
            font-weight: bold;
        }
    </style>
    <!-- Import Inter font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen p-4 md:p-8 flex items-center justify-center">

    <div class="max-w-lg w-full">
        <!-- Header -->
        <header class="mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 text-center">Linear Equation Practice</h1>
            <p class="text-lg text-gray-600 text-center mt-2">Write the equation from the given table or graph</p>
            <!-- Game Stats: Lives and Score -->
            <div id="game-stats" class="text-2xl font-bold text-center mt-4 text-gray-700 flex justify-center gap-6">
                <div id="lives-counter" class="text-red-500">Lives: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
                <div id="score-counter" class="text-blue-600">Score: 0</div>
            </div>
        </header>

        <!-- Quiz Card -->
        <div class="bg-white p-6 md:p-8 rounded-lg shadow-xl">
            <!-- Question Area -->
            <div id="quiz-area" class="space-y-6">
                
                <!-- Given Table / Graph -->
                <div class="text-center">
                    <p class="text-lg text-gray-600">Given the following:</p>
                    <div id="problem-representation" class="my-4 flex justify-center items-center min-h-[300px]">
                        <!-- Table or Graph will be inserted here -->
                    </div>
                </div>
                
                <!-- Question to Solve -->
                <div class="border-t border-gray-200 pt-6">
                    <p id="question-text" class="text-lg text-gray-600 text-center mb-4">
                        Write the equation in slope-intercept form:
                    </p>
                </div>

                <!-- Answer Input -->
                <div class="relative">
                    <div class="flex items-center justify-center space-x-2 text-2xl">
                        <span class="function-display">y =</span>
                        <input type="number" id="m-input" class="w-20 p-2 border border-gray-300 rounded-md shadow-sm text-lg text-center" placeholder="m">
                        <span class="function-display">x +</span>
                        <input type="number" id="b-input" class="w-20 p-2 border border-gray-300 rounded-md shadow-sm text-lg text-center" placeholder="b">
                    </div>
                    <p class="text-sm text-gray-500 text-center mt-2">Note: If the slope or y-intercept is negative, enter a negative number (e.g., -3).</p>
                </div>

                <!-- Feedback Area -->
                <div id="feedback-area" class="">
                    <!-- Feedback and Solution will be injected here -->
                </div>
            </div>

            <!-- Button Area -->
            <div class="mt-6 flex flex-col sm:flex-row gap-4">
                <button id="check-btn" class="w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold text-lg hover:bg-blue-700 transition-colors shadow-md flex-1">
                    Check Answer
                </button>
                <button id="next-btn" class="w-full bg-green-600 text-white px-6 py-3 rounded-lg font-semibold text-lg hover:bg-green-700 transition-colors shadow-md flex-1 hidden">
                    Next Question
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- DOM Elements ---
        const problemRepresentation = document.getElementById('problem-representation');
        const mInput = document.getElementById('m-input');
        const bInput = document.getElementById('b-input');
        const feedbackArea = document.getElementById('feedback-area');
        const checkBtn = document.getElementById('check-btn');
        const nextBtn = document.getElementById('next-btn');
        const livesCounter = document.getElementById('lives-counter'); // Lives element
        const scoreCounter = document.getElementById('score-counter'); // Score element

        // --- State Variables ---
        let correctM = null;
        let correctB = null;
        let lastProblemType = 'graph'; // Start with 'graph' so first is 'table'
        let nextTableTypeIsXZero = true; // Track which type of table to generate
        let currentQuestion = {}; // Store question details for solution
        let lives = 3; // Gamification lives
        let score = 0; // Gamification score
        let isGameOver = false;
        let hasLostLifeThisQuestion = false; // Prevent multiple life losses on one question

        // --- Helper Functions ---
        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function updateStatsDisplay() {
            livesCounter.innerHTML = `Lives: ${'‚ù§Ô∏è'.repeat(lives)}${'üñ§'.repeat(3 - lives)}`;
            scoreCounter.innerHTML = `Score: ${score}`;
        }


        // --- Graph Generation Logic (Re-used from previous app) ---
        function createSvgGraph(m, b) {
            const size = 300; // SVG viewBox size
            const gridSize = 30; // 1 unit = 30px, so 10x10 grid
            const numGrids = size / gridSize; // Number of grid lines in one direction
            const mid = size / 2; // Middle of the SVG

            // Create SVG element
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('viewBox', `0 0 ${size} ${size}`);
            svg.setAttribute('aria-hidden', 'true'); // For accessibility

            // Draw grid lines
            for (let i = 0; i <= numGrids; i++) {
                let y = i * gridSize;
                let hLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                hLine.setAttribute('x1', '0'); hLine.setAttribute('y1', y);
                hLine.setAttribute('x2', size); hLine.setAttribute('y2', y);
                hLine.classList.add('grid-line');
                svg.appendChild(hLine);

                let x = i * gridSize;
                let vLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                vLine.setAttribute('x1', x); vLine.setAttribute('y1', '0');
                vLine.setAttribute('x2', x); vLine.setAttribute('y2', size);
                vLine.classList.add('grid-line');
                svg.appendChild(vLine);
            }

            // Draw axes
            let xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            xAxis.setAttribute('x1', '0'); xAxis.setAttribute('y1', mid);
            xAxis.setAttribute('x2', size); xAxis.setAttribute('y2', mid);
            xAxis.classList.add('axis-line');
            svg.appendChild(xAxis);

            let yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            yAxis.setAttribute('x1', mid); yAxis.setAttribute('y1', '0');
            yAxis.setAttribute('x2', mid); yAxis.setAttribute('y2', size);
            yAxis.classList.add('axis-line');
            svg.appendChild(yAxis);

            // Add axis labels
            function addLabel(x, y, text, align = 'middle', baseline = 'central') {
                let label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                label.setAttribute('x', x);
                label.setAttribute('y', y);
                label.setAttribute('text-anchor', align);
                label.setAttribute('dominant-baseline', baseline);
                label.textContent = text;
                label.classList.add('axis-label');
                svg.appendChild(label);
            }

            // Add labels for -5 to 5 on both axes, skipping 0
            for(let i = 1; i <= (numGrids / 2); i++) {
                addLabel(mid + (i * gridSize), mid + 12, i); // +x
                addLabel(mid - (i * gridSize), mid + 12, -i); // -x
                addLabel(mid - 12, mid - (i * gridSize), i, 'end'); // +y
                addLabel(mid - 12, mid + (i * gridSize), -i, 'end'); // -y
            }
            addLabel(size - 10, mid + 20, 'x', 'end', 'central'); // x-axis label
            addLabel(mid - 20, 10, 'y', 'middle', 'start'); // y-axis label

            // Convert Cartesian coordinates to SVG coordinates
            function toSvgCoords(cx, cy) {
                return {
                    x: mid + (cx * gridSize),
                    y: mid - (cy * gridSize) // SVG y-axis is inverted
                };
            }

            // Draw the function line
            let p1 = toSvgCoords(-numGrids / 2, m * (-numGrids / 2) + b);
            let p2 = toSvgCoords(numGrids / 2, m * (numGrids / 2) + b);

            let functionLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            functionLine.setAttribute('x1', p1.x);
            functionLine.setAttribute('y1', p1.y);
            functionLine.setAttribute('x2', p2.x);
            functionLine.setAttribute('y2', p2.y);
            functionLine.classList.add('function-line');
            svg.appendChild(functionLine);

            // Highlight key points for clarity (y-intercept and another point)
            let yIntSvg = toSvgCoords(0, b);
            let yIntPoint = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            yIntPoint.setAttribute('cx', yIntSvg.x);
            yIntPoint.setAttribute('cy', yIntSvg.y);
            yIntPoint.classList.add('point');
            svg.appendChild(yIntPoint);

            // Another point (e.g., when x=1)
            let xValForPoint = 1;
            // Ensure point is different from y-intercept
            if (xValForPoint === 0) xValForPoint = 1; 
            if(m === 0) xValForPoint = 2; // Handle horizontal lines

            let otherPointSvg = toSvgCoords(xValForPoint, m * xValForPoint + b);
            let otherPoint = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            otherPoint.setAttribute('cx', otherPointSvg.x);
            otherPoint.setAttribute('cy', otherPointSvg.y);
            otherPoint.classList.add('point');
            svg.appendChild(otherPoint);

            return svg;
        }


        // --- Question Generation Logic ---
        function generateQuestion() {
            // If game is over, don't generate a new question
            if (isGameOver) return;

            // Clear inputs and feedback
            mInput.value = '';
            bInput.value = '';
            feedbackArea.innerHTML = '';
            mInput.classList.remove('correct-answer', 'incorrect-answer');
            bInput.classList.remove('correct-answer', 'incorrect-answer');
            mInput.disabled = false; // Ensure input is enabled
            bInput.disabled = false;
            checkBtn.disabled = false;
            checkBtn.classList.remove('hidden'); // Show check button
            nextBtn.classList.add('hidden'); // Hide next button
            hasLostLifeThisQuestion = false; // Reset for new question
            
            // 1. Generate function parameters
            let m = getRandomInt(-4, 4); // Slope
            if (m === 0) m = 1; // Avoid m=0
            let b = getRandomInt(-4, 4); // y-intercept
            
            // Store correct answers
            correctM = m;
            correctB = b;
            
            // 2. Decide question format ('table' or 'graph'), alternating
            let problemType;
            if (lastProblemType === 'table') {
                problemType = 'graph';
            } else {
                problemType = 'table';
            }
            lastProblemType = problemType; // Store the new format
            currentQuestion = { m, b, type: problemType }; // Store for solution

            // 3. Display the problem
            problemRepresentation.innerHTML = ''; // Clear previous content

            if (problemType === 'table') {
                // Generate and display a table
                let tableHtml = '<table class="data-table"><thead><tr><th>x</th><th>y</th></tr></thead><tbody>';
                let xValues;
                
                if (nextTableTypeIsXZero) {
                    xValues = [0, 1, 2, 3]; // Simple x values starting at 0
                    currentQuestion.tableType = 'xZero';
                } else {
                    let startX = getRandomInt(1, 3); // Start x from 1, 2, or 3
                    xValues = [startX, startX + 1, startX + 2, startX + 3];
                    currentQuestion.tableType = 'noXZero';
                }
                nextTableTypeIsXZero = !nextTableTypeIsXZero; // Flip for next time
                
                // Store points for solution
                currentQuestion.points = [];

                for (const x of xValues) {
                    let y = m * x + b;
                    tableHtml += `<tr><td>${x}</td><td>${y}</td></tr>`;
                    currentQuestion.points.push({x, y});
                }
                tableHtml += '</tbody></table>';
                problemRepresentation.innerHTML = tableHtml;

            } else { // 'graph'
                // Generate and display a graph
                const graphContainer = document.createElement('div');
                graphContainer.classList.add('graph-container');
                graphContainer.appendChild(createSvgGraph(m, b));
                problemRepresentation.appendChild(graphContainer);
            }
        }

        // --- Checking Logic ---
        function checkAnswer() {
            if (isGameOver) return; // Don't check if game is over

            const userM = parseInt(mInput.value, 10);
            const userB = parseInt(bInput.value, 10);
            
            // Show 'Next' button as soon as they check
            nextBtn.classList.remove('hidden');

            if (isNaN(userM) || isNaN(userB)) {
                feedbackArea.innerHTML = `<p class="incorrect-text text-center">Please enter a number for both 'm' and 'b'.</p>`;
                if (isNaN(userM)) mInput.classList.add('incorrect-answer');
                if (isNaN(userB)) bInput.classList.add('incorrect-answer');
                
                if (!hasLostLifeThisQuestion) {
                    lives--;
                    hasLostLifeThisQuestion = true;
                    updateStatsDisplay();
                    checkGameOver();
                }
                return;
            }

            let isMCorrect = (userM === correctM);
            let isBCorrect = (userB === correctB);

            // Style inputs individually
            mInput.classList.toggle('correct-answer', isMCorrect);
            mInput.classList.toggle('incorrect-answer', !isMCorrect);
            bInput.classList.toggle('correct-answer', isBCorrect);
            bInput.classList.toggle('incorrect-answer', !isBCorrect);
            
            // --- Build Solution String ---
            let solutionHtml = '<div class="mt-4 p-4 bg-gray-50 rounded-md border border-gray-200">';
            solutionHtml += '<h4 class="font-semibold text-gray-700 mb-2">Step-by-Step Solution:</h4>';
            
            if (currentQuestion.type === 'table') {
                const p1 = currentQuestion.points[0]; // (x1, y1)
                const p2 = currentQuestion.points[1]; // (x2, y2)

                solutionHtml += `<p class="text-gray-600 mt-2"><strong>1. Find the slope (m):</strong></p>`;
                solutionHtml += `<p class="text-gray-600">The slope is the "change in y" divided by the "change in x" (rise/run). Let's use the first two points: <strong>(${p1.x}, ${p1.y})</strong> and <strong>(${p2.x}, ${p2.y})</strong>.</p>`;
                solutionHtml += `<p class="text-gray-600 mt-1">Change in y (rise) = ${p2.y} - ${p1.y} = <strong>${p2.y - p1.y}</strong></p>`;
                solutionHtml += `<p class="text-gray-600 mt-1">Change in x (run) = ${p2.x} - ${p1.x} = <strong>${p2.x - p1.x}</strong></p>`;
                solutionHtml += `<p class="text-gray-600 text-center my-2">Slope (m) = Rise / Run = ${p2.y - p1.y} / ${p2.x - p1.x} = <strong>${currentQuestion.m}</strong>.</p>`;

                solutionHtml += `<p class="text-gray-600 mt-2"><strong>2. Find the y-intercept (b):</strong></p>`;
                
                if (currentQuestion.tableType === 'xZero') {
                    solutionHtml += `<p class="text-gray-600">The y-intercept is the value of 'y' when 'x' is 0. Looking at the table, we can see the point <strong>(${p1.x}, ${p1.y})</strong>.</p>`;
                    solutionHtml += `<p class="text-gray-600 text-center my-2">Therefore, <strong>b = ${p1.y}</strong>.</p>`;
                } else { // 'noXZero'
                    const calcMx1 = currentQuestion.m * p1.x;
                    const bSolution = p1.y - calcMx1;
                    const operator = calcMx1 >= 0 ? '-' : '+';
                    const absCalcMx1 = Math.abs(calcMx1);

                    solutionHtml += `<p class="text-gray-600">Since 'x=0' is not in the table, we must use the slope (m = <strong>${currentQuestion.m}</strong>) and any point from the table, like <strong>(${p1.x}, ${p1.y})</strong>.</p>`;
                    solutionHtml += `<p class="text-gray-600 mt-1">Plug these values into the equation <strong>y = mx + b</strong>:</p>`;
                    solutionHtml += `<p class="function-display text-center my-2" style="font-size: 1.25rem;"><strong>${p1.y}</strong> = (<strong>${currentQuestion.m}</strong>)(<strong>${p1.x}</strong>) + b</p>`;
                    solutionHtml += `<p class="function-display text-center my-2" style="font-size: 1.25rem;"><strong>${p1.y}</strong> = ${calcMx1} + b</p>`;
                    solutionHtml += `<p class="text-gray-600 mt-1">Now, solve for b by ${calcMx1 >= 0 ? 'subtracting' : 'adding'} <strong>${absCalcMx1}</strong> ${calcMx1 >= 0 ? 'from' : 'to'} both sides:</p>`;
                    solutionHtml += `<p class="function-display text-center my-2" style="font-size: 1.25rem;"><strong>${p1.y}</strong> ${operator} ${absCalcMx1} = b</p>`;
                    solutionHtml += `<p class="function-display text-center my-2" style="font-size: 1.25rem;"><strong>${bSolution}</strong> = b</p>`;
                    solutionHtml += `<p class="text-gray-600 text-center my-2">Therefore, <strong>b = ${currentQuestion.b}</strong>.</p>`;
                }

            } else { // type === 'graph'
                solutionHtml += `<p class="text-gray-600 mt-2"><strong>1. Find the y-intercept (b):</strong></p>`;
                solutionHtml += `<p class="text-gray-600">The y-intercept is the point where the line crosses the vertical y-axis. Looking at the graph, the line crosses at <strong>y = ${currentQuestion.b}</strong>.</p>`;
                solutionHtml += `<p class="text-gray-600 text-center my-2">Therefore, <strong>b = ${currentQuestion.b}</strong>.</p>`;

                // Find a second point for the solution
                const x2 = 1;
                const y2 = currentQuestion.m * x2 + currentQuestion.b;
                const rise = y2 - currentQuestion.b;
                const run = x2 - 0;

                solutionHtml += `<p class="text-gray-600 mt-2"><strong>2. Find the slope (m):</strong></p>`;
                solutionHtml += `<p class="text-gray-600">The slope is the "rise over run". Let's start at the y-intercept <strong>(0, ${currentQuestion.b})</strong> and find another clear point, like <strong>(${x2}, ${y2})</strong>.</p>`;
                solutionHtml += `<p class="text-gray-600 mt-1">To get from (0, ${currentQuestion.b}) to (${x2}, ${y2}), we move <strong>up ${rise}</strong> (the rise) and <strong>right ${run}</strong> (the run).</p>`;
                solutionHtml += `<p class="text-gray-600 text-center my-2">Slope (m) = Rise / Run = ${rise} / ${run} = <strong>${currentQuestion.m}</strong>.</p>`;
            }

            // Final Equation
            let bDisplayString = '';
            if (currentQuestion.b > 0) {
                bDisplayString = `+ ${currentQuestion.b}`;
            } else if (currentQuestion.b < 0) {
                bDisplayString = `- ${Math.abs(currentQuestion.b)}`;
            } else {
                bDisplayString = ''; // Don't show '+ 0'
            }

            solutionHtml += `<p class="text-gray-600 mt-4"><strong>3. Write the equation (y = mx + b):</strong></p>`;
            solutionHtml += `<p class="function-display text-center my-2 text-blue-600 font-bold">y = ${currentQuestion.m}x ${bDisplayString}</p>`;
            solutionHtml += '</div>';

            // --- Prepend Feedback and manage buttons ---
            let feedbackHtml = '';
            if (isMCorrect && isBCorrect) {
                feedbackHtml = `<p class="correct-text text-center mb-2">Correct! Great job.</p>`;
                checkBtn.classList.add('hidden'); // Hide check button on correct
                checkBtn.disabled = true;
                mInput.disabled = true; // Disable inputs after correct
                bInput.disabled = true;

                // Only add score if they haven't lost a life on this question
                if (!hasLostLifeThisQuestion) {
                    score++;
                    updateStatsDisplay();
                }

            } else {
                let errorMsg = 'Not quite.';
                if (isMCorrect && !isBCorrect) {
                    errorMsg = "Your slope (m) is correct, but check the y-intercept (b).";
                } else if (!isMCorrect && isBCorrect) {
                    errorMsg = "Your y-intercept (b) is correct, but check the slope (m)."
                } else {
                    errorMsg = "Both the slope (m) and y-intercept (b) are incorrect. Review the solution below."
                }
                feedbackHtml = `<p class="incorrect-text text-center mb-2">${errorMsg}</p>`;
                checkBtn.classList.remove('hidden'); // Keep check button visible
                checkBtn.disabled = false; // Allow them to try again

                if (!hasLostLifeThisQuestion) {
                    lives--;
                    hasLostLifeThisQuestion = true;
                    updateStatsDisplay();
                    checkGameOver();
                }
            }
            
            feedbackArea.innerHTML = feedbackHtml + solutionHtml;
        }

        function checkGameOver() {
            if (lives <= 0) {
                isGameOver = true;
                feedbackArea.innerHTML = `<p class="incorrect-text text-center text-xl font-bold mb-2">Game Over!</p><p class="text-gray-700 text-center text-lg">Your final score is: ${score}</p>`;
                checkBtn.classList.add('hidden');
                checkBtn.disabled = true;
                nextBtn.textContent = 'Restart Game';
                nextBtn.classList.remove('hidden');
                mInput.disabled = true;
                bInput.disabled = true;
            }
        }

        function restartGame() {
            lives = 3;
            score = 0;
            isGameOver = false;
            updateStatsDisplay();
            nextBtn.textContent = 'Next Question';
            generateQuestion();
        }

        // --- Event Listeners ---
        checkBtn.addEventListener('click', checkAnswer);
        
        nextBtn.addEventListener('click', () => {
            if (isGameOver) {
                restartGame();
            } else {
                generateQuestion();
            }
        });
        
        // Allow pressing Enter to check answer from either input
        function enterKeyCheck(event) {
            if (event.key === 'Enter') {
                if (!checkBtn.disabled) {
                    checkAnswer();
                }
            }
        }
        mInput.addEventListener('keydown', enterKeyCheck);
        bInput.addEventListener('keydown', enterKeyCheck);

        // Initial question on page load
        document.addEventListener('DOMContentLoaded', () => {
            updateStatsDisplay(); // Show initial stats
            generateQuestion();
        });
    </script>
</body>
</html>